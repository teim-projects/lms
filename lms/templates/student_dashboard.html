{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profit Max Share Market Academy </title>
    <link rel="icon" href="{% static 'images/favicon.jpeg' %}" type="image/png">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <style>
        body {
            margin: 0;
            overflow-x: hidden;
            position: relative;
            font-family: Verdana, sans-serif;
        }




        /* .logo {
            margin-left: 40px;
        } */

        /* Content Styles */
        .content {
            margin-left: 0;
            transition: margin-left 0.3s ease-in-out;
        }

        a:hover {
            /* background-color: rgb(94, 94, 93); */
            /* font-size: 18px; */
            /* border: 1px solid; */
            border-radius: 5px;
            box-shadow: 0px 0px 5px rgb(177, 177, 176);
            /* padding: 5px; */
        }

        .paid-btn {
            width: 100%;
        }

        .paid-form {
            box-shadow: 0px 0px 5px rgb(177, 177, 176);
            border-radius: 10px;
        }

        .row {
            display: flex;
            flex-wrap: wrap;
            margin-right: 25px;
        }





        .mypro {
            text-decoration: none;
            color: rgb(17, 14, 14);
            margin-right: 10px;

        }

        .mypro:hover {
            text-decoration: none;
            color: rgb(9, 37, 96);
            box-shadow: none;

        }







        /* .logo {
            margin-left: 40px;
        } */

        /* Content Styles */
        .content {
            margin-left: 0;
            transition: margin-left 0.3s ease-in-out;
        }










        /*Footer Css End*/
    </style>



</head>

<body>







    {% include 'Student_Base.html' %}




<div class="div" style="min-height: 100vh;">
    <!-- Course Card Content -->
    
        <div class="container my-4 " style="margin-top: 100px !important;">
            <div class="text-center mb-4">
                <h2>Available Courses</h2>
            </div>

            {% if courses %}
            <div class="row">
                {% for course in courses %}
                <div class="col-md-4 mb-4">
                    <div class="card h-100 card-box">
                        {% if course.thumbnail %}
                        <img class="card-img-top" src="{{ course.thumbnail.url }}" alt="{{ course.title }} Thumbnail"
                            style="width: 100%; height: 200px; object-fit: cover;">
                        {% else %}
                        <p>No thumbnail available</p>
                        {% endif %}

                        <div class="card-body">
                            <h5 class="card-title fw-semibold text-center" style="color:#0F40BF">{{ course.title }}</h5>

                            <div class="text-center">
                                <button class="btn btn-primary btn-sm toggle-details-btn"
                                    data-course-id="{{ course.id }}">
                                    Course Details
                                </button>
                            </div>

                            <!-- Hidden details section -->
                            <div class="course-details mt-3 d-none" id="details-{{ course.id }}">
                                <p class="card-text clamp-text">{{ course.description }}</p>

                                <h5 class="chapter-heading mt-3 text-center">Lessons</h5>
                                <ul class="list-unstyled" id="chapter-list-{{ course.id }}">
                                    {% for chapter in course.chapters.all %}
                                    <li
                                        class="mb-1 {% if forloop.counter > 3 %}d-none extra-chapter-{{ course.id }}{% endif %}">

                                        <a href="{{ chapter.youtube_link }}" target="_blank" class="chbtn chapter-title"
                                            id="chapter-title-{{ chapter.id }}">
                                            {{ chapter.title }}
                                        </a>
                                        {% if chapter.title|length > 50 %}
                                        <button type="button" class="read-more-btn text-primary small ms-1"
                                            onclick="toggleChapterText({{ chapter.id }})">Read More</button>
                                        {% endif %}
                                    </li>
                                    {% empty %}
                                    <li class="text-muted text-center text-info">No Lessons available</li>
                                    {% endfor %}
                                </ul>

                                {% if course.chapters.count > 3 %}
                                <div class="text-center mt-2">
                                    <button class="btn btn-outline-primary btn-sm explore-btn"
                                        data-course-id="{{ course.id }}">
                                        Explore More
                                    </button>
                                </div>
                                {% endif %}

                                <!-- Delete and Update Buttons -->
                                <div class="buttonsv d-flex justify-content-center align-items-center gap-2 mt-3">
                                    <form method="post" action="{% url 'delete_free_course' course.id %}"
                                        onsubmit="return confirm('Are you sure you want to delete this course?');">
                                        {% csrf_token %}
                                        <button type="submit" class="delet-btn"><i
                                                class="fa-solid fa-trash"></i></button>
                                    </form>

                                    <a href="{% url 'update_free_course' course.id %}">
                                        <button class="update-btn"><i class="fa-solid fa-pen-to-square"></i></button>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>

            {% else %}
            <p>No courses available</p>
            {% endif %}
        </div>

</div>

    {% include 'footer.html' %}



</body>

</html>